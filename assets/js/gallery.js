const galleryContainer=document.querySelector(".gallery-container"),worksList=Array.from(galleryContainer.children);let filteredList=Array.from(worksList);buildFilters();for(const a of galleryContainer.childNodes.values())a.addEventListener("click",b=>{openModal(b)});let modal=null;
function openModal(a){a.preventDefault();modal=document.querySelector("#modal");modal.style.display="flex";modal.removeAttribute("aria-hidden");modal.setAttribute("aria-modal",!0);window.addEventListener("keydown",hideModal);modal.addEventListener("click",hideModal);const b=document.querySelector("#modal-wrapper");var c;(c=document.querySelector("#modal-wrapper img"))||(c=document.createElement("img"));c.src=a.target.src.replace("gallery","gallery_orig");c.alt=a.target.alt;c.parentNode||b.appendChild(c);
document.querySelector(".mod-btn")||(a=document.createElement("button"),c=document.createElement("button"),a.className="mod-btn arr-left",c.className="mod-btn arr-right",a.innerHTML="<",c.innerHTML=">",a.addEventListener("click",d=>{prevImage(d,filteredList)}),c.addEventListener("click",d=>{nextImage(d,filteredList)}),b.appendChild(a),b.appendChild(c))}
function hideModal(a){null==modal||("keydown"!==a.type||"Escape"!==a.key&&"Esc"!==a.key)&&"modal"!=a.target.id||(window.setTimeout(function(){modal.style.display="none";modal=null},500),modal.setAttribute("aria-hidden",!0),modal.removeAttribute("aria-modal"))}
function prevImage(a,b){a.preventDefault();if(modal){a=document.querySelector("#modal-wrapper img");for(let c=0;c<b.length;c++)if(a.src.replace("gallery_orig","gallery")==b[c].src){0==c?(a.src=b[b.length-1].src.replace("gallery","gallery_orig"),a.alt=b[b.length-1].alt):(a.src=b[c-1].src.replace("gallery","gallery_orig"),a.alt=b[c-1].alt);break}}}
function nextImage(a,b){a.preventDefault();if(modal){a=document.querySelector("#modal-wrapper img");for(let c=0;c<b.length;c++)if(a.src.replace("gallery_orig","gallery")==b[c].src){c==b.length-1?(a.src=b[0].src.replace("gallery","gallery_orig"),a.alt=b[0].alt):(a.src=b[c+1].src.replace("gallery","gallery_orig"),a.alt=b[c+1].alt);break}}}
function buildFilters(){document.createElement("ul");var a=new Set;a.add("Tous");for(var b of galleryContainer.children)a.has(b.dataset.galleryTag)||a.add(b.dataset.galleryTag);b=document.createElement("ul");b.className="filters";for(const c of a){a=document.createElement("li");let d=document.createElement("button");d.innerHTML="Tous"==c?"Tous":c;d.className="filter-item";d.className+="Tous"==c?" active":"";d.addEventListener("click",e=>{filterWorks(e,c)});a.appendChild(d);b.appendChild(a)}galleryContainer.parentNode.insertBefore(b,
galleryContainer)}function filterWorks(a,b){a.preventDefault();let c=document.querySelector(".filter-item.active");if(c.innerHTML!=b){filteredList="Tous"==b?Array.from(worksList):worksList.filter(function(d){return d.dataset.galleryTag==b});galleryContainer.innerHTML="";for(const d of filteredList)galleryContainer.appendChild(d);c.className="filter-item";a.target.className+=" active"}};
